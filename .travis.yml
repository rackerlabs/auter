language: bash
services:
    - docker
before_install:
    - docker pull centos
script:
    - "git diff master | grep '+++' | awk -F/ '{print $NF}' >CHANGEDFILES"
    - "sudo docker run --rm=true --mount type=bind,source=$(pwd),destination=/auter --name auter-test -td centos:7"
    - "docker exec auter-test yum -y install epel-release &>/dev/null"
    - "docker exec auter-test yum -y install ShellCheck aspell &>/dev/null"
    - "docker exec auter-test /auter/tests/01-spellcheck.sh"
    - "docker exec auter-test /auter/tests/05-shellcheck.sh"

    # RPM Build test
    - "10-rpmbuild.sh"

